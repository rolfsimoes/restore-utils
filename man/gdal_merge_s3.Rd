% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gdal_merge_aws.R
\name{gdal_merge_s3}
\alias{gdal_merge_s3}
\title{Merge raster files from S3 bucket}
\usage{
gdal_merge_s3(
  base,
  glob = NULL,
  regex = NULL,
  roi = NULL,
  output_file = NULL,
  cache_dir = NULL,
  recursive = FALSE,
  cleanup = FALSE,
  type = "Byte",
  processor = NULL,
  ...
)
}
\arguments{
\item{base}{S3 base path where files are located (e.g., "s3://bucket/path/")}

\item{glob}{File pattern to match using glob style (e.g., "\emph{q}.tif", "\emph{\emph{B04}}.tif"). Mutually exclusive with regex}

\item{regex}{File pattern to match using regex style (e.g., "-q\\d+\\.tif$"). Mutually exclusive with glob}

\item{roi}{Optional region of interest for clipping (sf object or file path to vector file). Default is NULL}

\item{output_file}{Optional custom S3 path for output file. If NULL, generates name automatically by removing the pattern. Default is NULL}

\item{cache_dir}{Optional custom folder to save temporary files. If NULL, generates one automatically in system temp. Default is NULL}

\item{recursive}{Logical indicating whether to search recursively in subdirectories. Default is FALSE}

\item{cleanup}{Logical indicating whether to delete temporary files after completion. Default is FALSE}

\item{type}{Output raster type (GDAL valid format, e.g., Byte). Default is Byte}

\item{processor}{Function to pre-process files before merge.}

\item{...}{Additional parameters (reserved for future use)}
}
\value{
S3 path to the merged raster file
}
\description{
High-level function to select, download, and merge raster files from S3.
This function searches for raster files matching a pattern in an S3 bucket, downloads them,
merges them using \code{sf}, and uploads the result back to S3. Supports caching to avoid
re-downloading and re-processing files.
}
\examples{
\dontrun{
# Basic usage with glob pattern
merged_path <- gdal_merge_s3(
  base = "s3://mybucket/rasters/",
  glob = "*q*.tif"
)

# Using regex pattern
merged_path <- gdal_merge_s3(
  base = "s3://mybucket/rasters/",
  regex = "-q\\\\d+\\\\.tif$"
)

# With custom cache directory (files persist for reuse)
merged_path <- gdal_merge_s3(
  base = "s3://mybucket/rasters/",
  glob = "*q*.tif",
  cache_dir = "~/Downloads/cache/"
)

# With ROI and custom output
merged_path <- gdal_merge_s3(
  base = "s3://mybucket/rasters/",
  glob = "*q*.tif",
  roi = my_sf_polygon,
  output_file = "s3://mybucket/outputs/merged.tif"
)

# Recursive search with cleanup
merged_path <- gdal_merge_s3(
  base = "s3://mybucket/rasters/",
  regex = "_B04_.*\\\\.tif$",
  recursive = TRUE,
  cleanup = TRUE
)
}
}
\author{
Felipe Carlos, \email{efelipecarlos@gmail.com}

Felipe Carvalho, \email{felipe.carvalho@inpe.br}
}
